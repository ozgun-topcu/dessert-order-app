{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dhm20009\\\\Desktop\\\\Web Development\\\\react-projects\\\\dessert-app\\\\src\\\\store\\\\BasketProvider.js\",\n    _s = $RefreshSig$();\n\nimport { useReducer } from \"react\";\nimport BasketContext from \"./basket-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultBasketState = {\n  elements: [],\n  totalAmount: 0\n};\n\nconst basketReducer = (state, action) => {\n  if (action.type === \"ADD\") {\n    const updatedTotalAmount = state.totalAmount + action.element.price * action.element.amount;\n    const existingBasketElementIndex = state.elements.findindex(element => element.id === action.element.id);\n    const existingBasketElement = state.elements[existingBasketElementIndex];\n    let updatedElements;\n\n    if (existingBasketElement) {\n      const updatedElement = { ...existingBasketElement,\n        amount: existingBasketElement.amount + action.element.amount\n      };\n      updatedElements = [...state.elements];\n      updatedElements[existingBasketElementIndex] = updatedElement;\n    } else {\n      updatedElements = state.elements.concat(action.element);\n    }\n\n    return {\n      elements: updatedElements,\n      totalAmount: updatedTotalAmount\n    };\n  }\n\n  if (action.type === \"REMOVE\") {\n    const existingBasketElementIndex = state.elements.findindex(element => element.id === action.id);\n    const existingBasketElement = state.elements[existingBasketElementIndex];\n    const updatedTotalAmount = state.totalAmount - existingBasketElement.price;\n    let updatedElements;\n\n    if (existingElement.amount === 1) {\n      updatedElements = state.elements.filter(element => element.id !== action.id);\n    } else {\n      const updatedElement = { ...existingElement,\n        amount: existingElement.amount - 1\n      };\n      updatedElements = [...state.elements];\n      updatedElements[existingBasketElementIndex] = updatedElement;\n    }\n\n    return {\n      elements: updatedElements,\n      totalAmount: updatedTotalAmount\n    };\n  }\n\n  return defaultBasketState;\n};\n\nconst BasketProvider = props => {\n  _s();\n\n  const [basketState, dispatchBasketAction] = useReducer(basketReducer, defaultBasketState);\n\n  const addElementToBasketHandler = element => {\n    dispatchBasketAction({\n      type: \"ADD\",\n      element: element\n    });\n  };\n\n  const removeElementFromBasketHandler = id => {\n    dispatchBasketAction({\n      type: \"REMOVE\",\n      id: id\n    });\n  };\n\n  const basketContext = {\n    elements: basketState.elements,\n    totalAmount: basketState.totalAmount,\n    addElement: addElementToBasketHandler,\n    removeElement: removeElementFromBasketHandler\n  };\n  return /*#__PURE__*/_jsxDEV(BasketContext.Provider, {\n    value: basketContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 8\n  }, this);\n};\n\n_s(BasketProvider, \"vHf++TZn66NScWTCtSTEYNDIpa4=\");\n\n_c = BasketProvider;\nexport default BasketProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"BasketProvider\");","map":{"version":3,"sources":["C:/Users/dhm20009/Desktop/Web Development/react-projects/dessert-app/src/store/BasketProvider.js"],"names":["useReducer","BasketContext","defaultBasketState","elements","totalAmount","basketReducer","state","action","type","updatedTotalAmount","element","price","amount","existingBasketElementIndex","findindex","id","existingBasketElement","updatedElements","updatedElement","concat","existingElement","filter","BasketProvider","props","basketState","dispatchBasketAction","addElementToBasketHandler","removeElementFromBasketHandler","basketContext","addElement","removeElement","children"],"mappings":"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","sourcesContent":["\r\nimport {useReducer } from \"react\";\r\nimport BasketContext from \"./basket-context\";\r\n\r\nconst defaultBasketState = {\r\n    elements: [],\r\n    totalAmount:0,\r\n}\r\n\r\nconst basketReducer = (state, action) =>{\r\n    \r\n    if(action.type===\"ADD\"){\r\n        const updatedTotalAmount = state.totalAmount + (action.element.price * action.element.amount);\r\n\r\n        const existingBasketElementIndex = state.elements.findindex(element => element.id === action.element.id);\r\n        const existingBasketElement = state.elements[existingBasketElementIndex];\r\n        let updatedElements;\r\n\r\n        if(existingBasketElement){\r\n            const updatedElement = {\r\n                ...existingBasketElement,\r\n                amount: existingBasketElement.amount + action.element.amount\r\n            };\r\n            updatedElements = [ ...state.elements];\r\n            updatedElements[existingBasketElementIndex] = updatedElement;\r\n        } else {\r\n            updatedElements = state.elements.concat(action.element);\r\n        }\r\n\r\n               \r\n        return {\r\n            elements:updatedElements,\r\n            totalAmount:updatedTotalAmount,\r\n        };\r\n    }\r\n\r\n\r\n    if(action.type ===\"REMOVE\"){\r\n      \r\n      const existingBasketElementIndex = state.elements.findindex (element => element.id === action.id); \r\n      const existingBasketElement =  state.elements[existingBasketElementIndex];   \r\n      const updatedTotalAmount = state.totalAmount - existingBasketElement.price; \r\n\r\n      let updatedElements;\r\n      if(existingElement.amount === 1){\r\n        updatedElements = state.elements.filter(element => element.id !== action.id);\r\n      } else {\r\n        const updatedElement = {...existingElement, amount: existingElement.amount - 1} \r\n        updatedElements = [...state.elements];\r\n        updatedElements[existingBasketElementIndex] = updatedElement;\r\n      }\r\n\r\n      return {\r\n          elements: updatedElements,\r\n          totalAmount: updatedTotalAmount,\r\n      }\r\n    }\r\n\r\n    return defaultBasketState; \r\n};\r\n\r\n\r\nconst BasketProvider = props => {\r\n\r\n    const [basketState, dispatchBasketAction] = useReducer(basketReducer, defaultBasketState);\r\n\r\n    const addElementToBasketHandler = (element) => {\r\n        dispatchBasketAction({type:\"ADD\", element:element});\r\n    };\r\n\r\n    const removeElementFromBasketHandler = id => {\r\n        dispatchBasketAction({type:\"REMOVE\", id:id});\r\n    } \r\n\r\n    const basketContext = {\r\n    elements: basketState.elements,\r\n    totalAmount: basketState.totalAmount,\r\n    addElement: addElementToBasketHandler,\r\n    removeElement: removeElementFromBasketHandler\r\n\r\n}   \r\n\r\nreturn <BasketContext.Provider value={basketContext}>\r\n    {props.children}  \r\n</BasketContext.Provider>\r\n\r\n}\r\n\r\nexport default BasketProvider;"]},"metadata":{},"sourceType":"module"}